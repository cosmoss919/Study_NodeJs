REST μ„λ²„ κµ¬ν„μ„ μ„ν•΄ express ν”„λ μ„ μ›ν¬ μ‚¬μ©

<br/>

# ν™κ²½ μ„Έν…
- VSCodeμ—μ„ ν”„λ΅μ νΈλ¥Ό μƒμ„± ν• ν›„ ν„°λ―Έλ„μ— ν•΄λ‹Ή λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•λ‹¤.
```
npm init -y
```
- package.jsonμ΄λΌλ” νμΌμ•  μƒμ„±λλ‹¤.
- ν•΄λ‹Ή νμΌμ€ ν„μ¬ ν”„λ΅μ νΈμ—μ„ μ‚¬μ©λλ” npmμ— λ€ν• μ •λ³΄λ¥Ό λ‹΄κ³ μλ‹¤.

### express μ„¤μΉ
```
npm install --save express
```

<br/>

![image](https://github.com/cosmoss919/Study_NodeJs/assets/162278527/bcd0b09a-f623-4057-abdd-3e7bf96cd4d6)

μ΄λ ‡κ² λ‚μ¤λ©΄ μ μ„¤μΉλ κ²ƒμ΄λ‹¤.

μ„¤μΉ ν›„ package.jsonμ„ ν™•μΈν•λ©΄ expressμ— λ€ν• λ‚΄μ©μ΄ μ¶”κ°€λκ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

<br/>

### μ½”λ“ μ‘μ„±
- ν”„λ΅μ νΈμ— server.js νμΌμ„ μƒμ„±ν•κ³  μ•„λ μ½”λ“λ¥Ό μ…λ ¥ν•λ‹¤.
``` javascript
const express = require('express');     //express λ¨λ“ μ‚¬μ©
const app = express();
const port = process.env.PORT || 3000;  // process.env : node.js ν™κ²½λ³€μ κ΄€λ ¨ λ³€μ

app.get('/', (req, res) => {
    res.send('Hello world!');   //μ‘λ‹µ ν™”λ©΄μ— μ¶λ ¥
});

app.listen(port, () => {
    console.log(`server is running at PORT : ${port}`);
})
```

<br/>
<br/>

- μ½”λ“ μ‘μ„± ν›„ ν„°λ―Έλ„μ„ μ—΄μ–΄ μ•„λ λ…λ Ήμ–΄λ¥Ό μ…λ ¥ν•λ‹¤.
  
```
node server.js
```
server is running at PORT : 3000 κ°€ μ¶λ ¥λλ©΄ μ •μƒμ μΌλ΅ μ„λ²„κ°€ μ—°κ²°λ κ²ƒμ΄λ‹¤.

<br/>

μ΄μ  μ£Όμ†μ°½μ— localhost:3000 μ„ μ…λ ¥ν•μ—¬ μ ‘μ†ν•΄λ³Έλ‹¤.

![image](https://github.com/cosmoss919/Study_NodeJs/assets/162278527/8485703f-542a-4dce-ab51-5c6c078f365b)

ν™”λ©΄μ— μ „λ‹¬ν• κ°’ Hello world! κ°€ λ‚μ¤λ”κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

<br/>
<br/>

# λΌμ°ν…
- url λλ” κ²½λ΅ λ° νΉμ •ν• HTTP μ”μ²­ λ©”μ†λ“(get, post λ“±)μΈ νΉμ • μ—”λ“ν¬μΈνΈμ— λ€ν• ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ— μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ‘λ‹µν•λ” λ°©λ²•μ„ κ²°μ •ν•λ” κ²ƒμ„ λ§ν•λ‹¤.
### app.METHOD(PATH, HANDLER)
- app : express μΈμ¤ν„΄μ¤
- METHOD : HTTP μ”μ²­ λ©”μ†λ“
- PATH : μ„λ²„μ—μ„μ κ²½λ΅
- HANDLER : Route(λΌμ°νΈ)κ°€ μΌμΉν• λ• μ‹¤ν–‰λλ” ν•¨μ(request, response, next)

<br/>

#### κ°„λ‹¨ μμ 
- κ°„λ‹¨ν•κ² html νμΌμ„ κ°€μ Έμ™€μ„ μ¶λ ¥ν•λ”κ²ƒμ„ ν•΄λ³΄μ

<br/>

index.html
``` html
<!DOCTYPE html>

<html>
    <head>

    </head>
    <body>
        <h1>This is index.html</h1>
    </body>
</html>
```

server.js
``` javascript
const express = require('express');     
const app = express();
const port = process.env.PORT || 3000;  

app.get('/', (req, res) => {
    res.sendFile(__dirname + '/index.html')  // htmlνμΌ κ²½λ΅ μ…λ ¥
});

app.get('/about', (req, res) => {
    res.send('<h1> This is a About </h1>')  // htmlμ½”λ“λ„ κ°€λ¥    
});

app.listen(port, () => {
    console.log(`server is running at PORT : ${port}`);
})
```
ν„°λ―Έλ„μ—μ„ Ctrl + Cλ¥Ό λλ¬ μ„λ²„λ¥Ό μΆ…λ£ν•κ³  
λ‹¤μ‹ μ‹¤ν–‰ μ‹μΌμ„ ν™•μΈν•΄λ³Έλ‹¤.

<br/>

- localhost:3000

![image](https://github.com/cosmoss919/Study_NodeJs/assets/162278527/8303214f-4c57-4d5a-b03c-f2205cff637f)


- localhost:3000/about

![image](https://github.com/cosmoss919/Study_NodeJs/assets/162278527/254d433f-39c6-4a43-89bd-42e38e7e2850)

κ°κ°μ μ°½μ—μ„ μ΄λ ‡κ² μ¶λ ¥λλ©΄ μ •μƒμ μΌλ΅ μ‘λ™λκ²ƒμ΄λ‹¤.

<br/>

### λ―Έλ“¤μ›¨μ–΄
- μ”μ²­κ³Ό μ‘λ‹µ μ¤‘κ°„μ— μμΌλ©΄μ„ μ”μ²­μ„ μ²λ¦¬ν•κ±°λ‚ μ›ν•λ” ν•νƒλ΅ μ‘λ‹µμ„ μμ •ν•λ” κΈ°λ¥μ„ κ°€μ§„ ν•¨μ

#### κΈ°λ³Έ λ―Έλ“¤μ›¨μ–΄
server.js
``` javascript
//κΈ°λ³Έ λ―Έλ“¤μ›¨μ–΄
app.use('/', (req, res, next) => {
    res.send('κΈ°λ³Έ λ―Έλ“¤μ›¨μ–΄ μ‘λ™');
    next(); //λ‹¤μ λ―Έλ“¤μ›¨μ–΄ ν•¨μ μ‘λ™
})
```
use μ•μ— μλ” λ‘λ²μ§Έ μΈμκ°€ κΈ°λ³Έ λ―Έλ“¤μ›¨μ–΄μ΄λ‹¤

<br/>

#### router λ―Έλ“¤μ›¨μ–΄
server.js
``` javascript
const express = require('express');     
const app = express();
const port = process.env.PORT || 3000;  
const router = express.Router();    //router κ°μ²΄μƒμ„±

app.use(router);    //router κ°μ²΄λ¥Ό λ―Έλ“¤μ›¨μ–΄λ΅ λ“±λ΅

//router μ‘μ„±
router.route("/about")
.get((req, res) => {
    res.send("This is About");
})
.post((req, res) => {       //ν•λ‚μ λΌμ°ν„°μ— μ—¬λ¬κ°μ ν•Έλ“¤λ¬ μ§€μ • κ°€λ¥
    res.send("add Something");
});


app.listen(port, () => {
    console.log(`server is running at PORT : ${port}`);
})

```

<br/>
<br/>

### νλΌλ―Έν„°
- μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ΅ λ³΄λ‚΄λ” κ°’λ“¤

<br/>

#### νλΌλ―Έν„° λ°›κΈ°
- pathμ λΌμ°ν… λ’¤μ— ? λ΅ μ‹μ‘ν•λ” λ¶€λ¶„
- "νλΌλ―Έν„°=κ°’"μ ν•μ‹μΌλ΅ μ‚¬μ©λλ©° νλΌλ―Έν„° μ‚¬μ΄λ¥Ό μ΄μ–΄μ¤„λ• & λ¥Ό μ‚¬μ©ν•λ‹¤.
``` javasript
const express = require('express');     
const app = express();
const port = process.env.PORT || 3000;  
const router = express.Router();

app.use(router);

router.route("/about")
.get((req, res) => {
    const {name, age} = req.query;
    res.send(`User Name is ${name}, Age is ${age}`);
});

app.listen(port, () => {
    console.log(`server is running at PORT : ${port}`);
})
```
- μ£Όμ†μ°½μ— http://localhost:3000/about?name=node&age=25 μ…λ ¥

<br/>

#### κ²½λ΅λ¥Ό λ³€μλ΅ λ°›κΈ°
- ? λ¥Ό μ‚¬μ©ν•μ§€ μ•κ³  / λ΅ λ³€μλ¥Ό κµ¬λ¶„
- μ£Όμ†μ°½μ— http://localhost:3000/about/node/25 μ…λ ¥

``` javascript
router.get('/about/:name/:age', (req, res) => {
    const {name, age} = req.params;  //β­ paramsλ΅ λ°”λ€μ—λ‹¤.
    res.send(`User Name is ${name}, User age is ${age}`);
});
```

<br/>

#### Bodyλ΅ λ°›κΈ°
- body-parser npmμ„ μ‚¬μ©
```
npm install body-parser
```

<br/>

server.js
``` javascript
const express = require('express');     
const bodyParser = require('body-parser');  // λ¨λ“ μ‚¬μ©
const app = express();
const port = process.env.PORT || 3000;  

app.use(router);
app.use(bodyParser.json()); //json λ“±λ΅
app.use(bodyParser.urlencoded({ extended : false})) //URL-encoded λ“±λ΅

// λ΅κ·ΈμΈ json μ‘μ„±
app.get('/', (req, res) => {
    var template = 
    `<!DOCTYPE html>
    <html>
        <body>
            <form action='/login' method='post'>
                ID : <input type='text' name='id'><br>
                PW : <input type='password' name='pwd'><br>
                <input type='submit' value='login'>
            </form>
        </body>
    </html>`;
    res.writeHead(200, {'ContentType':'text/html'});
    res.write(template);
    res.end();
});

app.post('/login', (req, res) => {
    const {id, pw} = req.body;
    res.send("ID : " + id + " / PW : " + pw);
 });

app.listen(port, () => {
    console.log(`server is running at PORT : ${port}`);
})

```
κΈ°λ³Έ λ΅μ»¬νΈμ¤νΈ μ ‘μ†

![image](https://github.com/cosmoss919/Study_NodeJs/assets/162278527/906703c7-0f09-4119-8186-579890b11219)

![image](https://github.com/cosmoss919/Study_NodeJs/assets/162278527/b739a25c-02b9-420b-ba66-1ee8ba8631e7)



<br/>
<br/>

π’΅ [μ°Έκ³ ν•λ©΄ μΆ‹μ€ λ§ν¬](https://m.blog.naver.com/hj_kim97/222913693753)



